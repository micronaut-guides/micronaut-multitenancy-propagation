
Provide a `BookFetcher` bean replacement for the Test environment.

[source,java]
.gateway/src/test/groovy/example/micronaut/MockBookFetcher.groovy
----
include::{sourceDir}/gateway/src/test/groovy/example/micronaut/MockBookFetcher.groovy[]
----

Create a tests which verifies the flow using Geb.

[source,java]
.gateway/src/test/groovy/example/micronaut/HomePageSpec.groovy
----
include::{sourceDir}/gateway/src/test/groovy/example/micronaut/HomePageSpec.groovy[]
----
<1> Annotate the class with `@MicronautTest` to let Micronaut starts the embedded server and inject the beans. More info: https://micronaut-projects.github.io/micronaut-test/latest/guide/index.html[https://micronaut-projects.github.io/micronaut-test/latest/guide/index.html].
<2> Inject the `EmbeddedServer`.
