
Provide a `BookFetcher` bean replacement for the Test environment.

[source,java]
.gateway/src/test/groovy/example/micronaut/MockBookFetcher.groovy
----
include::{sourceDir}/gateway/src/test/groovy/example/micronaut/MockBookFetcher.groovy[]
----

Create a tests which verifies the flow using Geb.

[source,java]
.gateway/src/test/groovy/example/micronaut/HomePageSpec.groovy
----
include::{sourceDir}/gateway/src/test/groovy/example/micronaut/HomePageSpec.groovy[]
----
<1> Start an `EmbeddedServer`.
<2> Point the browser base url to the embedded server url.
